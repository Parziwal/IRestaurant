<app-spinner *ngIf="!restaurantDataLoaded; else form"></app-spinner>
<ng-template #form>
  <div class="row justify-content-center">
    <div class="col-md-10 col-lg-7">
      <a [routerLink]="['/restaurant/details', restaurant.id]">Ugrás az étterem oldalára ></a>
      <form [formGroup]="restaurantForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline">
          <mat-label>Étterem neve</mat-label>
          <input matInput type="text" formControlName="name" placeholder="Név" maxlength="50" required />
          <mat-hint align="end">{{ restaurantForm.value.name?.length || 0 }}/50</mat-hint>
          <mat-error *ngIf="restaurantForm.get('name').invalid">{{
            getErrorMessage("name")
            }}</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Ismertető</mat-label>
          <textarea matInput type="text" formControlName="shortDescription" placeholder="Az étterem..." maxlength="200"
            required rows="3"></textarea>
          <mat-hint align="end">{{
            restaurantForm.value.shortDescription?.length || 0
            }}/200</mat-hint>
          <mat-error *ngIf="restaurantForm.get('shortDescription').invalid">{{
            getErrorMessage("shortDescription")
            }}</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Részletes leírás</mat-label>
          <textarea matInput type="text" formControlName="detailedDescription" placeholder="Az étterem..."
            maxlength="10000" rows="10"></textarea>
          <mat-error *ngIf="restaurantForm.get('detailedDescription').invalid">{{
            getErrorMessage("detailedDescription")
            }}</mat-error>
        </mat-form-field>
        <div formGroupName="address" class="row">
          <mat-form-field appearance="outline" class="col-md-4">
            <mat-label>Irányítószám</mat-label>
            <input matInput type="number" formControlName="zipCode" placeholder="1000" min="1000" max="9999" required>
            <mat-error *ngIf="restaurantForm.get('address.zipCode').invalid">{{
              getErrorMessage("address.zipCode")
              }}</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" class="col-md-8">
            <mat-label>Város</mat-label>
            <input matInput type="text" formControlName="city" placeholder="Budapest" maxlength="50" required>
            <mat-error *ngIf="restaurantForm.get('address.city').invalid">{{
              getErrorMessage("address.city")
              }}</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" class="col-12">
            <mat-label>Utca, házszám</mat-label>
            <input matInput type="text" formControlName="street" placeholder="Kossuth Lajos u. 1" maxlength="1000"
              required>
            <mat-error *ngIf="restaurantForm.get('address.street').invalid">{{
              getErrorMessage("address.street")
              }}</mat-error>
          </mat-form-field>
          <mat-form-field appearance="outline" class="col-12">
            <mat-label>Telefonszám</mat-label>
            <input matInput type="tel" formControlName="phoneNumber" placeholder="06-30-125-6789"
              pattern="[0-9]{2}-[0-9]{2}-[0-9]{3}-[0-9]{4}" required>
            <mat-error *ngIf="restaurantForm.get('address.phoneNumber').invalid">{{
              getErrorMessage("address.phoneNumber")
              }}</mat-error>
          </mat-form-field>
        </div>
        <div class="row justify-content-between">
          <div class="col-md-4 mb-3">
            <button type="submit" class="btn btn-primary btn-lg btn-block" [disabled]="!restaurantDataChanged">Mentés</button>
          </div>
          <div class="col-md-4 mb-3">
            <button type="button" class="btn btn-secondary btn-lg btn-block" (click)="restoreClicked()">Visszaállítás</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</ng-template>